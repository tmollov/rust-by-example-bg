# Деструктуриране на референции/указатели

За указателите, трябва да се направи разграничение между деконструкцията и разсейването,
тъй като те са различни концепции, които се използват по различен начин от езици като C/C++.

* Дереферирането използва `*`
* Деструктурирането използва `&`, `ref`, и `ref mut`

```rust,editable
fn main() {
    // Задайте референция към тип `i32`. Знака `&` означава, 
    // че има присвоена референция.
    let reference = &4;

    match reference {
        // Ако `reference` се използва с `pattern matching` със `&val`, това води
        // в сравнение като:
        // `&i32`
        // `&val`
        // ^ Виждаме, че ако съвпадението `&`s са изпуснати, тогава `i32`
        // трябва да се присвоен на `val`.
        // Това е пример за деструктуриране.
        &val => println!("Got a value via destructuring: {:?}", val),
    }

    // За да избегнете `&`, трябва да дереферирате в/преди `match`.
    match *reference {
        // Това е пример за дерефериране.
        val => println!("Got a value via dereferencing: {:?}", val),
    }

    // Ами ако не започнете с референция?
    // Това не е референция, защото дясната страна е стойност присвоявена от променливата.
    let _not_a_reference = 3;

    // Rust предоставя `ref` за подобна цел. Той променя присвояването,
    // така че да се създаде референция към елемента; тази референция е присвоена.
    let ref _is_a_reference = 3;

    // Следователно, чрез дефиниране на 2 стойности без референции, 
    // референциите им могат да бъдат извлечени чрез `ref` и `ref mut`.
    let value = 5;
    let mut mut_value = 6;

    // Използвайте ключова дума `ref` за да създадете референция.
    match value {
        ref r => println!("Got a reference to a value: {:?}", r),
    }

    // Използвайте `ref mut` по подобен начин.
    match mut_value {
        ref mut m => {
            // Получаваме като стойност референция. Трябва да го дереферираме преди да можем
            // да добавим каквото и да било към него.
            *m += 10;
            println!("We added 10. `mut_value`: {:?}", m);
        },
    }
}
```

### Вижте също

[The ref pattern](../../../scope/borrow/ref.md)
